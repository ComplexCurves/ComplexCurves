<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Complex Curves</title>
<link rel="shortcut icon" href="examples/favicon.ico" />
<script type="text/javascript" src="http://oss.maxcdn.com/jquery/2.2.2/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://oss.maxcdn.com/semantic-ui/2.1.8/semantic.min.css" />
<script type="text/javascript" src="http://oss.maxcdn.com/semantic-ui/2.1.8/semantic.min.js"></script>
<script type="text/javascript" src="build/SingularityExplorer.js"></script>
<!--
<script type="text/javascript">
var examples, results, oldvalue;

function appendExample(curves, example, interactive = false) {
    var curve = document.createElement("div");
    curve.id = example.id;
    curve.setAttribute("class", "ui card");
    if (interactive) {
        if (example.cached) {
            var iframe = document.createElement("iframe");
            iframe.src = "examples/" + example.id + ".cached.html";
            iframe.width = 450;
            iframe.height = 450;
            iframe.scrolling = "no";
            iframe.setAttribute("frameborder", "0");
            curve.appendChild(iframe);
        } else {
            var canvas = document.createElement('canvas');
            canvas.width = 800;
            canvas.height = 800;
            //canvas.style.width = "450px";
            //canvas.style.height = "450px";
            curve.appendChild(canvas);
            canvas.singularityExplorer =
                SingularityExplorer.fromEquation(canvas, example.equation,
                    example.depth || 12);
        }
    } else {
        //var imgContainer = document.createElement("div");
        //imgContainer.setAttribute("class", "ui medium image");
        var img = document.createElement("img");
        img.setAttribute("class", "ui medium image");
        img.src = "examples/" + example.id + ".png";
        //imgContainer.appendChild(img);
        //curve.appendChild(imgContainer);
        curve.appendChild(img);
    }
    var contentContainer = document.createElement("div");
    contentContainer.setAttribute("class", "content");
    if (example.name) {
        var p = document.createElement("p");
        p.setAttribute("class", "header");
        p.innerHTML = example.name;
        contentContainer.appendChild(p);
    }
    if (example.equation) {
        var descriptionContainer = document.createElement("div");
        descriptionContainer.setAttribute("class", "description");
        descriptionContainer.innerHTML = "\\[" + example.equation + "=0\\]";
        contentContainer.appendChild(descriptionContainer);
    }
    curve.appendChild(contentContainer);
    curves.appendChild(curve);
}

function clearExamples(curves) {
    var canvas = curves.querySelector("canvas");
    if (canvas)
        canvas.singularityExplorer.unregisterEventHandlers();
    while (curves.hasChildNodes())
        curves.removeChild(curves.firstChild);
}

function showExample(example) {
    if (example !== null) {
        var curves = document.getElementById("curves");
        clearExamples(curves);
        appendExample(curves, example, true);
    }
}
</script>
-->
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
	var examples;
    var req = new XMLHttpRequest();
    req.open("GET", "examples.json");
    req.responseType = "json";
    req.onload = function() {
        examples = req.response;
		$('.ui.search').search({
            duration: 0,
            transition: false,
			maxResults: 50,
			minCharacters: 0,
			searchFields: ['title'],
			searchFullText: false,
			source: examples,
			onResultsClose: function () {
				$('.ui.search').search('show results');
			},
            templates: {
				message: function(message, type) {
					var
						html = ''
					;
					if(message !== undefined && type !== undefined) {
						html +=  ''
						+ '<div class="message ' + type + '">'
						;
						// message type
						if(type == 'empty') {
						html += ''
							+ '<div class="header">No Results</div class="header">'
							+ '<div class="description">' + message + '</div class="description">'
						;
						}
						else {
						html += ' <div class="description">' + message + '</div>';
						}
						html += '</div>';
					}
					return html;
				},
				standard: function(response, fields) {
					var
						html = ''
					;
					if(response[fields.results] !== undefined) {

						// each result
						$.each(response[fields.results], function(index, result) {
						if(result[fields.url]) {
							html  += '<a class="ui card result" href="' + result[fields.url] + '">';
						}
						else {
							html  += '<a class="ui card result">';
						}
						if(result[fields.image] !== undefined) {
							html += ''
							+ '<div class="ui medium image">'
							+ ' <img src="' + result[fields.image] + '">'
							+ '</div>'
							;
						}
						html += '<div class="content">';
						if(result[fields.price] !== undefined) {
							html += '<div class="price">' + result[fields.price] + '</div>';
						}
						if(result[fields.title] !== undefined) {
							html += '<div class="title">' + result[fields.title] + '</div>';
						}
						if(result[fields.description] !== undefined) {
							html += '<div class="description">' + result[fields.description] + '</div>';
						}
						html  += ''
							+ '</div>'
						;
						html += '</a>';
						});

						if(response[fields.action]) {
						html += ''
						+ '<a href="' + response[fields.action][fields.actionURL] + '" class="action">'
						+   response[fields.action][fields.actionText]
						+ '</a>';
						}
						return html;
					}
					return false;
				}
            }
		});
		$('.ui.search').search('search local', '');
		$('.ui.search').search('show results');
    };
    req.send();

});
</script>
<style type="text/css">
.results.transition.hidden {
    display: block !important;
    visibility: visible !important;
}
.ui.cards.results {
	border: none;
	border-radius: unset;
	box-shadow: unset;
	display: flex !important;
}
.ui.cards.results > .card {
	display: flex !important;
	padding: 0;
}
.ui.cards.results > .card > .content{
	margin: 0 !important;
}
.ui.cards.results > .card > .image{
	width: unset;
	height: unset;
}
</style>
</head>
<body class="basic minimal">
<div class="main ui container">
<div class="ui fluid search" style="margin: 1.75em 0">
	<div class="ui icon input">
		<input class="prompt" placeholder="Name or equation of curve" type="search">
		<i class="search icon"></i>
	</div>
	<div class="ui four cards results"></div>
</div>
<div id="curves" class="ui four cards"></div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  "HTML-CSS": {availableFonts: ["TeX"]},
         MMLorHTML: {prefer: "HTML"}
});
MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
  var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
  VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
  VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
  VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
  VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
});
MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
  var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
  VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
  VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
  VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
  VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
});
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
